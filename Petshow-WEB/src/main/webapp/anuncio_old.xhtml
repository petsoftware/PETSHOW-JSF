<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
		          
	<ui:composition xmlns="http://www.w3.org/1999/xhtml"  
	                xmlns:h="http://java.sun.com/jsf/html"  
	                xmlns:f="http://java.sun.com/jsf/core"  
	                xmlns:ui="http://java.sun.com/jsf/facelets"
					xmlns:pe="http://primefaces.org/ui/extensions"
	                xmlns:p="http://primefaces.org/ui" template="templates/main.xhtml">
	   	
	   	<ui:param name="activeAnuncio" value="active" />
	   	<ui:param name="pageIcon" value="bullhorn" />
	   	<ui:param name="pageTitle" value="ANÚNCIO" />
	   		  
	   	<ui:remove> 	   		   		   	
		   	<ui:define name="js">
				<h:outputScript name="js/anuncio.js" />
			</ui:define>
	   	</ui:remove>
	   	<ui:define name="header">	   	
   			<p:commandButton id="btnLimpar"
   				style="margin-right:4px"
   				styleClass="btn btn-primary btn-lg"
   				icon="fa fa-refresh"
   				title="Limpar Anúncio?"
   				value="Limpar" />
   				
	   		<p:commandButton id="btnSalvar"
   				style="margin-right:4px"
   				styleClass="btn btn-info btn-lg"
   				icon="fa fa-floppy-o"
   				title="Salvar Anúncio?"
   				value="Salvar" />
   				
   			<p:commandButton id="btnExcluir"
   				styleClass="btn btn-danger btn-lg"
   				icon="fa fa-trash-o"
   				title="Excluir Anúncio?"
   				value="Excluir" />	   		
   		</ui:define>
	   	
	   	<ui:define name="body">
	   		
	   		<div class="ui-grid ui-grid-responsive">
				<div class="ui-grid-row ui-grid-row-custom">
					<div class="ui-grid-col-12">
						
						<h:panelGrid columns="2">
							<h:panelGrid columns="1">
								<h:outputLabel value="Descreva o seu anúncio:" for="txtDesc" />
								<p:inputTextarea rows="6" cols="33" id="txtDesc"
									value="#{anuncioBean.anuncio.descricao}" />

								<h:outputLabel value="Data inicial do anúncio ativo:"
									for="txtInicio" />
								<p:calendar id="txtInicio"
									value="#{anuncioBean.anuncio.dataInicial}"
									pattern="dd/MM/yyyy HH:mm:ss" required="true" />

								<h:outputLabel value="Data final do anúncio ativo:" for="txtFim" />
								<p:calendar id="txtFim"
									value="#{anuncioBean.anuncio.dataVencimento}"
									pattern="dd/MM/yyyy HH:mm:ss" />

								<p:separator />
								<h:outputLabel value="FOTO" for="txtInputFoto" />
								<h:inputFile id="txtInputFoto" value="#{anuncioBean.imagem}" />
								<p:separator />
								<h:panelGrid columns="6">
									<h:commandButton action="#{anuncioBean.novo}" type="submit"
										value="Novo" update="messages" id="btNovo" />
									<h:commandButton action="#{anuncioBean.salvarAnuncio}"
										type="submit" value="Salvar" update="messages,grid"
										id="btSalvar" />
									<h:commandButton action="#{anuncioBean.excluirAnuncio}"
										type="submit" value="Excluir" update="messages" id="btExcluir" />
								</h:panelGrid>



							</h:panelGrid>
							<h:panelGrid columns="1">
								<h:graphicImage
									url="data:image/jpg;base64,#{anuncioBean.anuncio.foto}"
									id="visualizacao" alt="Visualização do anuncio" />
							</h:panelGrid>
						</h:panelGrid>

						<p:dataTable var="anuncio" value="#{anuncioBean.anuncios}"
							paginator="#{anuncioBean.anuncios.size() > 12}" rows="13"
							paginatorPosition="bottom" id="grid">

							<p:column headerText="Descrição" style="width:50%">
								<h:outputText value="#{anuncio.descricao}" />
							</p:column>

							<p:column headerText="Data inicial" style="width:10%">
								<h:outputText value="#{anuncio.dataInicial}">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"
										timeZone="America/Recife" />
								</h:outputText>
							</p:column>

							<p:column headerText="Data Final" style="width:10%">
								<h:outputText value="#{anuncio.dataVencimento}">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm"
										timeZone="America/Recife" />
								</h:outputText>

							</p:column>

							<p:column headerText="Data Cadastro" style="width:10%">
								<h:outputText value="#{anuncio.dataCadastro}">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm"
										timeZone="America/Recife" />
								</h:outputText>
							</p:column>


							<p:column headerText="Edição" style="width:20%">
								<h:commandButton action="#{anuncioBean.selecionar(anuncio)}"
									type="submit" value="Editar" />
								<h:commandButton
									action="#{anuncioBean.excluirAnuncio(anuncio.id)}"
									type="submit" value="Excluir" />
							</p:column>
						</p:dataTable>
				</div>
				</div>			
			</div>
			
	   	</ui:define>
	   		   		   		    
	</ui:composition> 
		
</html>